class DynamicAdapt{constructor(){this.type="max",this.init()}init(){this.objects=[],this.daClassname="--dynamic",this.nodes=[...document.querySelectorAll("[data-fls-dynamic]")],this.nodes.forEach(e=>{const t=e.dataset.flsDynamic.trim().split(","),i={};i.element=e,i.parent=e.parentNode,i.destinationParent=t[3]&&e.closest(t[3].trim())||document,t[3]&&t[3].trim();const r=t[0]?t[0].trim():null;if(r){const s=i.destinationParent.querySelector(r);s&&(i.destination=s)}i.breakpoint=t[1]?t[1].trim():"767.98",i.place=t[2]?t[2].trim():"last",i.index=this.indexInParent(i.parent,i.element),this.objects.push(i)}),this.arraySort(this.objects),this.mediaQueries=this.objects.map(({breakpoint:e})=>`(${this.type}-width: ${e/16}em),${e}`).filter((e,n,t)=>t.indexOf(e)===n),this.mediaQueries.forEach(e=>{const n=e.split(","),t=window.matchMedia(n[0]),i=n[1],r=this.objects.filter(({breakpoint:s})=>s===i);t.addEventListener("change",()=>{this.mediaHandler(t,r)}),this.mediaHandler(t,r)})}mediaHandler(e,n){e.matches?n.forEach(t=>{t.destination&&this.moveTo(t.place,t.element,t.destination)}):n.forEach(({parent:t,element:i,index:r})=>{i.classList.contains(this.daClassname)&&this.moveBack(t,i,r)})}moveTo(e,n,t){n.classList.add(this.daClassname);const i=e==="last"||e==="first"?e:parseInt(e,10);i==="last"||i>=t.children.length?t.append(n):i==="first"?t.prepend(n):t.children[i].before(n)}moveBack(e,n,t){n.classList.remove(this.daClassname),e.children[t]!==void 0?e.children[t].before(n):e.append(n)}indexInParent(e,n){return[...e.children].indexOf(n)}arraySort(e){if(this.type==="min")e.sort((n,t)=>n.breakpoint===t.breakpoint?n.place===t.place?0:n.place==="first"||t.place==="last"?-1:n.place==="last"||t.place==="first"?1:0:n.breakpoint-t.breakpoint);else{e.sort((n,t)=>n.breakpoint===t.breakpoint?n.place===t.place?0:n.place==="first"||t.place==="last"?1:n.place==="last"||t.place==="first"?-1:0:t.breakpoint-n.breakpoint);return}}}document.querySelector("[data-fls-dynamic]")&&window.addEventListener("load",()=>window.flsDynamic=new DynamicAdapt);const countActionsContainers=document.querySelectorAll("[data-fls-countactions]");countActionsContainers.forEach(c=>{const e=c.querySelector("[data-count-quantity]"),n=c.querySelector("[data-count-plus]"),t=c.querySelector("[data-count-minus]");if(!e||!n||!t)return;const i=c.closest(".item-body-product-cart");let r,s;i&&(r=i.querySelector(".item-body-product-cart__price"),s=i.querySelectorAll("[data-countTotal]"));function l(){if(r&&s.length>0){const a=parseFloat(r.textContent.replace(/[^0-9.]/g,""))||0,o=parseInt(e.textContent.trim())||1,p=(a*o).toFixed(2);s.forEach(f=>f.textContent=`$${p}`)}}function d(){let a=parseInt(e.textContent.trim())||1;return Math.max(1,a)}function u(a){a=Math.max(1,parseInt(a)||1),e.textContent=a,l()}n.addEventListener("click",function(a){a.preventDefault();const o=d();u(o+1)}),t.addEventListener("click",function(a){a.preventDefault();const o=d();o>1&&u(o-1)}),e.addEventListener("blur",function(){let a=parseInt(this.textContent.trim())||1;this.textContent=Math.max(1,a),l()}),e.addEventListener("input",function(){this.textContent=this.textContent.replace(/[^0-9]/g,"")}),l()});
