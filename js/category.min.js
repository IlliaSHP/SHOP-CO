import"./main.min.js";import"./colorpicker.min.js";import{d as y,h as x,b as v}from"./common.min.js";import"./productcard.min.js";import"./breadcrumb.min.js";function I(){const u=document.querySelectorAll("[data-fls-spollers]");if(u.length>0){let t=function(i,l=!1){i.forEach(e=>{e=l?e.item:e,l.matches||!l?(e.classList.add("--spoller-init"),s(e)):(e.classList.remove("--spoller-init"),s(e,!1))})},s=function(i,l=!0){let e=i.querySelectorAll("details");e.length&&e.forEach(n=>{let a=n.querySelector("summary");l?(a.removeAttribute("tabindex"),n.hasAttribute("data-fls-spollers-open")?(a.classList.add("--spoller-active"),n.open=!0):(n.open=!1,a.nextElementSibling.hidden=!0)):(a.setAttribute("tabindex","-1"),a.classList.remove("--spoller-active"),n.open=!0,a.nextElementSibling.hidden=!1)})},h=function(i){const l=i.target;if(l.closest("summary")&&l.closest("[data-fls-spollers]")&&(i.preventDefault(),l.closest("[data-fls-spollers]").classList.contains("--spoller-init"))){const e=l.closest("summary"),n=e.closest("details"),a=e.closest("[data-fls-spollers]"),p=a.hasAttribute("data-fls-spollers-one"),d=n.hasAttribute("data-fls-spollers-scroll"),f=a.dataset.flsSpollersSpeed?parseInt(a.dataset.flsSpollersSpeed):500;if(!a.querySelectorAll(".--slide").length&&(p&&!n.open&&o(a),n.open?setTimeout(()=>{n.open=!1},f):n.open=!0,e.classList.toggle("--spoller-active"),x(e.nextElementSibling,f),d&&e.classList.contains("--spoller-active"))){const m=n.dataset.flsSpollersScroll,g=+m?+m:0,S=n.hasAttribute("data-fls-spollers-scroll-noheader")?document.querySelector(".header").offsetHeight:0;window.scrollTo({top:n.offsetTop-(g+S),behavior:"smooth"})}}if(!l.closest("[data-fls-spollers]")){const e=document.querySelectorAll("[data-fls-spollers-close]");e.length&&e.forEach(n=>{const a=n.closest("[data-fls-spollers]"),p=n.parentNode;if(a.classList.contains("--spoller-init")){const d=a.dataset.flsSpollersSpeed?parseInt(a.dataset.flsSpollersSpeed):500;n.classList.remove("--spoller-active"),v(n.nextElementSibling,d),setTimeout(()=>{p.open=!1},d)}})}},o=function(i){const l=i.querySelector("details[open]");if(l&&!i.querySelectorAll(".--slide").length){const e=l.querySelector("summary"),n=i.dataset.flsSpollersSpeed?parseInt(i.dataset.flsSpollersSpeed):500;e.classList.remove("--spoller-active"),v(e.nextElementSibling,n),setTimeout(()=>{l.open=!1},n)}};document.addEventListener("click",h);const c=Array.from(u).filter(function(i,l,e){return!i.dataset.flsSpollers.split(",")[0]});c.length&&t(c);let r=y(u,"flsSpollers");r&&r.length&&r.forEach(i=>{i.matchMedia.addEventListener("change",function(){t(i.itemsArray,i.matchMedia)}),t(i.itemsArray,i.matchMedia)})}}window.addEventListener("load",I);class b{constructor(t){this.container=t,this.minInput=this.container.querySelector(".filter-price__input--min"),this.maxInput=this.container.querySelector(".filter-price__input--max"),this.progress=this.container.querySelector(".filter-price__progress"),this.track=this.container.querySelector(".filter-price__track");const s=this.container.querySelectorAll(".filter-price__value");if(this.minValue=s[0],this.maxValue=s[1],this.minValue||(this.minValue=this.container.querySelector('output[for="price-min"]')),this.maxValue||(this.maxValue=this.container.querySelector('output[for="price-max"]')),!this.minInput||!this.maxInput){console.error("Price range inputs not found!");return}this.init()}init(){this.updateProgress(),this.updateValues(),this.bindEvents()}bindEvents(){this.minInput.addEventListener("input",()=>this.handleMinInput()),this.maxInput.addEventListener("input",()=>this.handleMaxInput()),this.minInput.addEventListener("change",()=>this.handleMinInput()),this.maxInput.addEventListener("change",()=>this.handleMaxInput()),this.track.addEventListener("click",t=>this.handleTrackClick(t))}handleMinInput(){let t=parseInt(this.minInput.value),s=parseInt(this.maxInput.value);t>s-10&&(this.minInput.value=s-10,t=s-10),this.updateProgress(),this.updateValues()}handleMaxInput(){let t=parseInt(this.minInput.value),s=parseInt(this.maxInput.value);s<t+10&&(this.maxInput.value=t+10,s=t+10),this.updateProgress(),this.updateValues()}handleTrackClick(t){const s=this.track.getBoundingClientRect(),h=(t.clientX-s.left)/s.width,o=parseInt(this.minInput.min),c=parseInt(this.minInput.max),r=Math.round(o+(c-o)*h),i=parseInt(this.minInput.value),l=parseInt(this.maxInput.value),e=Math.abs(r-i),n=Math.abs(r-l);e<n?r<l-10&&(this.minInput.value=r,this.handleMinInput()):r>i+10&&(this.maxInput.value=r,this.handleMaxInput())}updateProgress(){const t=parseInt(this.minInput.min),s=parseInt(this.minInput.max),h=parseInt(this.minInput.value),o=parseInt(this.maxInput.value),c=(h-t)/(s-t)*100,r=(o-t)/(s-t)*100;this.progress.style.left=`${c}%`,this.progress.style.right=`${100-r}%`}updateValues(){const t=parseInt(this.minInput.value),s=parseInt(this.maxInput.value);this.minValue?this.minValue.textContent=`$${t}`:console.warn("minValue element not found"),this.maxValue?this.maxValue.textContent=`$${s}`:console.warn("maxValue element not found")}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-fls-pricerange]").forEach(t=>{new b(t)})});class E{constructor(){this.filterPanel=document.querySelector(".filters-panel"),this.sidebar=document.querySelector(".catalog__sidebar"),this.openBtn=document.querySelector("[data-open-filter]"),this.closeBtn=document.querySelector(".filters-panel__close"),this.overlay=null,this.touchStartY=0,this.touchEndY=0,this.touchStartX=0,this.isDragging=!1,this.isScrolling=!1,this.startScrollTop=0,this.filterPanel&&this.init()}init(){this.originalParent=this.filterPanel.parentElement,this.mobileMedia=window.matchMedia("(max-width: 991.98px)"),this.handleMediaChange(this.mobileMedia),this.mobileMedia.addEventListener("change",t=>this.handleMediaChange(t)),this.createOverlay(),this.bindEvents()}handleMediaChange(t){t.matches?document.body.appendChild(this.filterPanel):this.originalParent.insertBefore(this.filterPanel,this.originalParent.firstChild)}createOverlay(){this.overlay=document.createElement("div"),this.overlay.className="filters-overlay",document.body.appendChild(this.overlay)}bindEvents(){this.openBtn&&this.openBtn.addEventListener("click",()=>this.open()),this.closeBtn&&this.closeBtn.addEventListener("click",()=>this.close()),this.overlay.addEventListener("click",()=>this.close()),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.filterPanel.classList.contains("--active")&&this.close()}),this.bindSwipeGestures(),this.filterPanel.addEventListener("touchmove",t=>{this.filterPanel.classList.contains("--active")&&t.stopPropagation()},{passive:!0})}bindSwipeGestures(){this.filterPanel.addEventListener("touchstart",t=>{this.touchStartY=t.touches[0].clientY,this.touchStartX=t.touches[0].clientX,this.startScrollTop=this.filterPanel.scrollTop,this.isDragging=!1,this.isScrolling=!1},{passive:!0}),this.filterPanel.addEventListener("touchmove",t=>{if(this.isScrolling)return;const s=t.touches[0].clientY,h=t.touches[0].clientX,o=s-this.touchStartY,c=Math.abs(h-this.touchStartX);if(!this.isDragging&&Math.abs(o)>10)if(o>0&&this.filterPanel.scrollTop===0)this.isDragging=!0;else{this.isScrolling=!0;return}if(c>Math.abs(o)){this.isScrolling=!0;return}if(this.isDragging&&o>0&&window.innerWidth<=680.98){const i=o*.6;this.filterPanel.style.transform=`translateY(${i}px)`,this.filterPanel.style.transition="none"}},{passive:!0}),this.filterPanel.addEventListener("touchend",t=>{if(!this.isDragging){this.isScrolling=!1;return}this.touchEndY=t.changedTouches[0].clientY;const s=this.touchEndY-this.touchStartY;this.filterPanel.style.transition="",s>100&&window.innerWidth<=680.98?this.close():this.filterPanel.style.transform="",this.isDragging=!1,this.isScrolling=!1},{passive:!0})}open(){this.filterPanel.classList.add("--active"),this.overlay.classList.add("--active"),document.body.classList.add("filters-open"),this.filterPanel.setAttribute("aria-hidden","false"),this.closeBtn&&this.closeBtn.focus()}close(){this.filterPanel.classList.remove("--active"),this.overlay.classList.remove("--active"),document.body.classList.remove("filters-open"),this.filterPanel.style.transform="",this.filterPanel.style.transition="",this.filterPanel.setAttribute("aria-hidden","true"),this.openBtn&&this.openBtn.focus()}}document.addEventListener("DOMContentLoaded",()=>{window.mobileFilters=new E});
